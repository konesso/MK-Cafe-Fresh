app_shop.fn.opinionsInit=function(){$(".opinion_star").on("click",(function(){var t=$(this),n=t.siblings("strong"),o=t.siblings("input");return t.addClass("active").prevAll("a").addClass("active"),t.nextAll("a").removeClass("active"),n.text(t.attr("title")),o.val(t.attr("rel")),$(".opinions_points_picture:not(.d-block)").length&&$(".opinions_points_picture").addClass("d-block"),!1})),$(".shop_opinions_button button").on("click",(function(){return app_shop.fn.opinionsValidate($("#shop_opinion_form"))})),$("#shop_opinion_form input[required]").on("blur, input",(function(){""!=$(this).val()&&$(this).parent().removeClass("has-error").find(".validate_message").remove()})),$("#show_opinion_form").on("click",(function(t){return t.stopPropagation(),Modal({element:$(".opinions_add_form"),classList:"--add-opinion"}),!1})),document.querySelectorAll(".opinion_rate").forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();const n=document.querySelector(".opinions__more");n&&(n.style.display="none");return(document.querySelector("#opinions_filter_confirmed:checked")?document.querySelectorAll('.opinions_list__item[data-confirmed="true"]'):document.querySelectorAll(".opinions_list__item")).forEach((t=>{t.getAttribute("data-opinion_rate")===this.id||this.classList.contains("--active")?(t.setAttribute("data-hide",!1),app_shop?.vars?.bLazy?.revalidate()):t.setAttribute("data-hide",!0)})),this.classList.toggle("--active"),document.querySelectorAll(`.opinion_rate:not([id="${this.id}"])`).forEach((t=>{t.classList.remove("--active")})),app_shop.vars.view>2&&document.getElementById("opinions_section").scrollIntoView({behavior:"smooth"}),document.querySelector('.opinions_list__item[data-hide="false"]')?document.getElementById("no_opinions_of_type").classList.add("d-none"):document.getElementById("no_opinions_of_type").classList.remove("d-none"),!1}))})),$(".rate_opinion a").on("click",(function(t){t.preventDefault();var n=$(this);opinionId=n.siblings("input[name=opinionId]").val(),opinionState=n.find("input[name=opinionState]").val(),$.ajax({url:"/ajax/opinions.php?action=rate",type:"POST",dataType:"json",data:"id="+opinionId+"&operation="+opinionState,success:function(t){t.errors.length&&Alertek.Start(t.errors[0].faultString),t.result&&(n.parent().find(".opinion_rate_yes .rate_count").text(t.result.score_positive),n.parent().find(".opinion_rate_no .rate_count").text(t.result.score_negative))}})}))},app_shop.run((function(){app_shop.fn.opinionsInit()}),"all","#opinions_section",!0);